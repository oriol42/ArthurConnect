{% extends 'ArthurConnect/base.html' %}
{% load static %}
{% block title %} Page Acceuil {% endblock %}

{% block content %}
  <!--================Home Banner Area =================-->
  <section class="home_banner_area mb-40">
    <div class="banner_inner d-flex align-items-center">
      <div class="container">
        <div class="banner_content row">
          <div class="col-lg-12">
            <h3>Développez vos <span>Compétences</span><br />Avec nos <span>Formations</span></h3>
            <h4>ArthurConnect - Votre partenaire de formation en ligne</h4>
            <a class="main_btn mt-40" href="{% url 'boutique_formations' %}">Voir les Formations</a>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!--================End Home Banner Area =================-->


  <!-- Start feature Area -->
  <section class="feature-area section_gap_bottom_custom">
    <div class="container">
      <div class="row">
        <div class="col-lg-3 col-md-6">
          <div class="single-feature">
            <div class="title">
              <i class="flaticon-money"></i>
              <h3>Garantie Satisfait</h3>
            </div>
            <p>Remboursement sous 30 jours si vous n'êtes pas satisfait</p>
          </div>
        </div>

        <div class="col-lg-3 col-md-6">
          <div class="single-feature">
            <div class="title">
              <i class="flaticon-truck"></i>
              <h3>Accès Immédiat</h3>
            </div>
            <p>Accédez à vos formations dès l'achat effectué</p>
          </div>
        </div>

        <div class="col-lg-3 col-md-6">
          <div class="single-feature">
            <div class="title">
              <i class="flaticon-support"></i>
              <h3>Support 24/7</h3>
            </div>
            <p>Notre équipe est disponible pour vous accompagner</p>
          </div>
        </div>

        <div class="col-lg-3 col-md-6">
          <div class="single-feature">
            <div class="title">
              <i class="flaticon-blockchain"></i>
              <h3>Paiement Sécurisé</h3>
            </div>
            <p>Vos données sont protégées par un cryptage SSL</p>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- End feature Area -->

  <!--================ Categories Section =================-->
  <section class="categories-area section_gap_bottom_custom">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-12">
          <div class="main_title">
            <h2><span>Nos Catégories</span></h2>
            <p>Découvrez nos formations et articles organisés par catégories</p>
          </div>
        </div>
      </div>
      
      <div class="row">
        {% for category in categories %}
        <div class="col-lg-3 col-md-6 mb-4">
          <div class="category-card text-center p-4 rounded shadow-sm" style="background: white; border: 1px solid #e9ecef; height: 200px; display: flex; flex-direction: column; justify-content: center; transition: all 0.3s ease; cursor: pointer;" onclick="window.location.href='{% url 'boutique_formations' %}?category={{ category.id }}'">
            <i class="ti-book text-primary" style="font-size: 3rem; margin-bottom: 15px;"></i>
            <h4 class="text-dark">{{ category.name }}</h4>
            <p class="small text-muted">{{ category.description|truncatewords:8 }}</p>
            <a href="{% url 'boutique_formations' %}?category={{ category.id }}" class="btn btn-outline-primary btn-sm mt-2">
              Voir les formations
            </a>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </section>
  <!--================ End Categories Section =================-->

  <!--================ Featured Formations Area =================-->
  <section class="feature_product_area section_gap_bottom_custom">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-12">
          <div class="main_title">
            <h2><span>Formations</span> Vedettes</h2>
            <p>Découvrez nos meilleures formations pour développer vos compétences</p>
          </div>
        </div>
      </div>

      <div class="row">
        {% for product in featured_products %}
        <div class="col-lg-4 col-md-6">
          <div class="single-product formation-card">
            <div class="product-img">
              <img class="img-fluid w-100" src="{% static 'ArthurConnect/img/banner/homephoto.JPG' %}" alt="{{ product.name }}" />
              {% if product.product_type == 'formation' %}
              <span class="badge badge-info">
                <i class="ti-book mr-1"></i>Formation
              </span>
              {% else %}
              <span class="badge badge-success">
                <i class="ti-shopping-bag mr-1"></i>Article
              </span>
              {% endif %}
              {% if product.discount_percentage > 0 %}
                <span class="badge badge-danger">-{{ product.discount_percentage }}%</span>
              {% endif %}
            </div>
            <div class="product-btm">
              <div class="mt-4 mb-3">
                <a href="{% url 'product_detail' product.id %}" class="d-block mb-3">
                  <h4>{{ product.name }}</h4>
                </a>
              </div>
              
              <div class="price-section mb-3">
                <div class="d-flex align-items-center mb-2">
                  <span class="h5 text-primary font-weight-bold mr-3">{{ product.final_price|floatformat:0 }} FCFA</span>
                  {% if product.old_price %}
                    <del class="text-muted">{{ product.old_price|floatformat:0 }} FCFA</del>
                  {% endif %}
                </div>
                <div class="d-flex justify-content-between align-items-center">
                  <small class="text-muted">{{ product.category.name }}</small>
                  {% if product.product_type == 'formation' %}
                  <small class="text-info">
                    <i class="ti-time mr-1"></i>{{ product.duration_hours }}h
                  </small>
                  {% else %}
                  <small class="text-success">
                    <i class="ti-package mr-1"></i>Stock: {{ product.stock_quantity }}
                  </small>
                  {% endif %}
                </div>
              </div>
              
              <p class="mb-3">{{ product.short_description|truncatewords:15 }}</p>
              
              <div class="mt-auto">
                <div class="d-flex gap-2">
                  <a href="{% url 'product_detail' product.id %}" class="btn btn-outline-primary flex-fill">
                    <i class="ti-eye"></i> Voir détails
                  </a>
                  {% if user.is_authenticated %}
                    <a href="{% url 'add_to_cart' product.id %}" class="btn btn-primary flex-fill">
                      <i class="ti-shopping-cart"></i> Ajouter
                    </a>
                  {% else %}
                    <a href="{% url 'login' %}" class="btn btn-primary flex-fill">
                      <i class="ti-shopping-cart"></i> Ajouter
                    </a>
                  {% endif %}
                </div>
              </div>
            </div>
          </div>
        </div>
        {% empty %}
        <div class="col-12">
          <div class="text-center py-5">
            <i class="ti-book" style="font-size: 4rem; color: #ccc;"></i>
            <h4 class="mt-3">Aucune formation vedette</h4>
            <p class="text-muted">Les formations vedettes seront bientôt disponibles</p>
          </div>
        </div>
        {% endfor %}
      </div>
      
      {% if featured_products %}
      <div class="row mt-4">
        <div class="col-12 text-center">
          <a href="{% url 'product_list' %}" class="btn btn-primary">Voir toutes les formations</a>
        </div>
      </div>
      {% endif %}
    </div>
  </section>
  <!--================ End Featured Formations Area =================-->

  <!--================ Offer Area =================-->
  <section class="offer_area">
    <div class="container">
      <div class="row justify-content-center">
        <div class="offset-lg-4 col-lg-6 text-center">
          <div class="offer_content">
            <h3 class="text-uppercase mb-40">Formations Premium</h3>
            <h2 class="text-uppercase">50% de réduction</h2>
            <a href="{% url 'product_list' %}" class="main_btn mb-20 mt-5">Découvrir</a>
            <p>Offre limitée</p>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!--================ End Offer Area =================-->


  <!--================ Start Blog Area =================-->
  <section class="blog-area section-gap">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-12">
          <div class="main_title">
            <h2><span>latest blog</span></h2>
            <p>Bring called seed first of third give itself now ment</p>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-lg-4 col-md-6">
          <div class="single-blog">
            <div class="thumb">
              <img class="img-fluid" src="img/b1.jpg" alt="">
            </div>
            <div class="short_details">
              <div class="meta-top d-flex">
                <a href="#">By Admin</a>
                <a href="#"><i class="ti-comments-smiley"></i>2 Comments</a>
              </div>
              <a class="d-block" href="single-blog.html">
                <h4>Ford clever bed stops your sleeping
                  partner hogging the whole</h4>
              </a>
              <div class="text-wrap">
                <p>
                  Let one fifth i bring fly to divided face for bearing the divide unto seed winged divided light
                  Forth.
                </p>
              </div>
              <a href="#" class="blog_btn">Learn More <span class="ml-2 ti-arrow-right"></span></a>
            </div>
          </div>
        </div>
        
        <div class="col-lg-4 col-md-6">
          <div class="single-blog">
            <div class="thumb">
              <img class="img-fluid" src="img/b2.jpg" alt="">
            </div>
            <div class="short_details">
              <div class="meta-top d-flex">
                <a href="#">By Admin</a>
                <a href="#"><i class="ti-comments-smiley"></i>2 Comments</a>
              </div>
              <a class="d-block" href="single-blog.html">
                <h4>Ford clever bed stops your sleeping
                  partner hogging the whole</h4>
              </a>
              <div class="text-wrap">
                <p>
                  Let one fifth i bring fly to divided face for bearing the divide unto seed winged divided light
                  Forth.
                </p>
              </div>
              <a href="#" class="blog_btn">Learn More <span class="ml-2 ti-arrow-right"></span></a>
            </div>
          </div>
        </div>

        <div class="col-lg-4 col-md-6">
          <div class="single-blog">
            <div class="thumb">
              <img class="img-fluid" src="img/b3.jpg" alt="">
            </div>
            <div class="short_details">
              <div class="meta-top d-flex">
                <a href="#">By Admin</a>
                <a href="#"><i class="ti-comments-smiley"></i>2 Comments</a>
              </div>
              <a class="d-block" href="single-blog.html">
                <h4>Ford clever bed stops your sleeping
                  partner hogging the whole</h4>
              </a>
              <div class="text-wrap">
                <p>
                  Let one fifth i bring fly to divided face for bearing the divide unto seed winged divided light
                  Forth.
                </p>
              </div>
              <a href="#" class="blog_btn">Learn More <span class="ml-2 ti-arrow-right"></span></a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!--================ End Blog Area =================-->
{% endblock %}
